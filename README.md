# 事件计时器 (Event Timer)

一个功能丰富的桌面计时工具，支持多事件并发计时、标签管理、模板执行、历史记录筛选、系统托盘、自定义通知间隔、两种暂停模式等。适合需要精确记录各类任务耗时的场景。

---

## 📌 功能特性

- **多事件同时计时** – 同时启动多个事件，每个事件独立计时、独立控制。
    
- **标签系统** – 为事件添加标签，支持标签管理、标签频次统计、多选筛选。
    
- **模板功能** – 创建事件模板，一键按顺序启动多个事件，自动连续计时。
    
- **暂停模式**
    
    - **模式A**：普通暂停/恢复，总时间累计（推荐）。
        
    - **模式B**：分段计时，每次暂停将当前段记录为一条历史，恢复后新建同名事件，总时间持续累计。  
        可在设置中自由切换。
        
- **历史记录**
    
    - 完整保存事件名称、标签、开始/结束时间、持续时间。
        
    - 支持按标签多选筛选、按具体日期筛选。
        
    - 点击列标题可切换时间显示格式（仅时间 / 完整日期时间）。
        
    - 右键菜单可删除单条记录、编辑标签。
        
- **简易窗口** – 主窗口隐藏时自动弹出，显示当前进行中的事件，支持暂停/恢复/停止，可独立置顶。
    
- **系统托盘** – 最小化至托盘，托盘菜单可分别唤出主窗口或简易窗口。
    
- **通知提醒** – 事件运行达到设定分钟数后弹出提醒，支持自定义间隔、是否自动停止事件。
    
- **主题自适应** – 自动检测 Windows / macOS 系统深色/浅色模式，并应用对应配色。
    
- **数据持久化** – 所有数据（历史、标签、模板、设置）自动保存至程序目录下的 `config` 文件夹，便于迁移与备份。
    
- **一键打包** – 支持 PyInstaller 打包为独立 exe，配置文件仍位于 exe 同级 `config` 文件夹。
    

---

## 📥 安装与运行

### 1. 环境要求

- Python 3.7 或更高版本
    
- 操作系统：Windows 10/11，macOS，Linux（需支持系统托盘）
    

### 2. 下载源码

bash

git clone https://github.com/你的用户名/event-timer.git
cd event-timer

### 3. 安装依赖

bash

pip install pillow pystray

_注：`pystray` 在 Linux 下可能需要额外依赖，请参考其官方文档。_

### 4. 运行程序

bash

python event_timer.py

---

## 🎯 使用指南

### 主界面概览

- **顶部**：事件名称输入框、标签输入框（右侧×一键清空）、开始计时按钮。
    
- **右上**：模板管理、标签管理、模板快速选择、窗口置顶复选框。
    
- **中部**：当前正在计时的事件列表，每个事件显示名称、标签、持续时间，并提供**暂停/恢复**、**停止**按钮。
    
- **下方**：历史记录表格及筛选工具栏，底部有“清空历史”、“设置”、“打开配置文件夹”按钮。
    

### ⏱️ 基本操作

1. **开始计时** – 输入事件名称，可选输入标签（多个标签用逗号或空格分隔，如 `#工作 #编程`），点击“开始计时”。
    
2. **暂停/恢复** – 点击事件右侧的“暂停”按钮，根据当前设置的模式暂停；再次点击“恢复”继续计时。
    
3. **停止事件** – 点击“停止”按钮，事件结束并存入历史记录。
    
4. **历史筛选** – 点击“标签筛选”可多选要显示的标签；在日期输入框输入 `YYYY-MM-DD` 或点击 📅 按钮选择日期，点击“确定”筛选。
    
5. **模板使用** – 在“模板管理”中创建模板，保存后可在下拉框直接选择使用，模板中的事件将依次自动开始。
    

### ⚙️ 设置窗口

通过主界面底部“设置”按钮进入，可配置：

- 通知间隔（分钟）及是否启用、是否自动停止。
    
- 暂停模式（A/B）。
    
- 简易窗口默认是否置顶。
    
- 历史记录默认是否显示完整日期时间。
    

---

## 📁 数据存储

所有数据文件默认保存在 **程序所在目录下的 `config` 文件夹** 中：

|文件名|作用|
|---|---|
|`events_history.json`|历史记录|
|`event_names.json`|事件名称使用频次（用于输入补全）|
|`event_tags.json`|标签使用频次|
|`event_templates.json`|用户创建的模板|
|`settings.json`|通知间隔、暂停模式等设置|

**迁移备份**：直接复制整个 `config` 文件夹即可。

---

## 🚀 打包为独立 EXE（Windows）

1. 安装 PyInstaller：
    

bash

pip install pyinstaller

2. 在程序目录下执行：
    

bash

pyinstaller --onefile --windowed --icon=timer_icon.ico --name=EventTimer event_timer.py

_若无图标文件可省略 `--icon` 参数。_

3. 打包后的 `EventTimer.exe` 位于 `dist` 文件夹，运行时会在 **exe 同级目录** 自动创建 `config` 文件夹。
    

---

## ❓ 常见问题

**Q：历史记录日期输入框无法点击？**  
A：已通过固定宽度、强制启用输入框并增加 📅 日历按钮完美解决。请确保使用最新版代码。

**Q：简易窗口不显示怎么办？**  
A：主窗口隐藏且至少有一个事件在进行时，简易窗口会自动弹出；也可通过托盘菜单“显示简易窗口”手动唤出。

**Q：如何彻底退出程序？**  
A：右键托盘图标 → 退出；或直接关闭主窗口（仅最小化）→ 托盘菜单退出。

---

## 🤝 贡献

欢迎提交 Issue 或 Pull Request。  
建议新功能或修复请在提交前确保代码风格与现有代码保持一致，并更新相关文档。


---

## ✨ 致谢

感谢所有使用并反馈问题的用户，让这个工具变得更好。  
如果您喜欢本项目，欢迎在 GitHub 上点亮 ⭐ Star！
